<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>todo_list</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

</head>
<body>
    <div id='root'>
       <div>
           <input v-model='inputValue'/>
           <button @click='handleSubmit'>提交</button>
       </div>
       <ul>
           <todo-item 
                v-for='(item, index) of list'
                :key='index'
                :content='item'
                :index='index'
                @delete='handleDelete'
            >
           </todo-item>
       </ul>
    </div>

    <script>
        //使用vue创建组件的方法
        //全局组件
        // Vue.component('todo-item', {
        //     template: "<li>item</li>"
        // })

        //局部组件
        var TodoItem = {
            props: ['content', 'index'],//组件接收从外部传入的content参数
            template: "<li @click='handleClick'>{{content}}</li>",
            methods: {
                handleClick: function () {
                    //实现子组件的删除操作
                    //需要在父组件中将渲染子组件的数据删除

                    //发布-订阅模式
                   this.$emit('delete',this.index)
                }
            }
        }
        new Vue({
            el: '#root',
            components: {
                'todo-item': TodoItem
            },
            data: {
                inputValue: '',
                list: []
            },
            methods: {
                handleSubmit: function () {
                    this.list.push(this.inputValue)
                    this.inputValue = ""
                },
                handleDelete: function(index) {
                    this.list.splice(index,1)
                }
            }
        })
    </script>
</body>
</html>